import{c as f}from"./cartStore-me3BoJxt.js";import{_ as m,f as v,o as n,c as i,a as t,F as u,g as p,n as _,h as g,i as b,t as r}from"./index-f2bgMWh1.js";var k={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"annchou",BASE_URL:"/vue_week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:y,VITE_PATH:P}=k,x={data(){return{productsList:[],pagination:{}}},methods:{...v(f,["addToCart"]),getProductList(o=1,a){let d=`${y}/api/${P}/products?page=${o}`;a&&(d+=`&category=${a}`),this.axios.get(d).then(c=>{const{products:s,pagination:l}=c.data;this.productsList=s,this.pagination=l}).catch(c=>{this.$swal.fire({icon:"error",text:c.response.data.message})})},showProductInfo(o){this.$router.push(`/productinfo/${o}`)}},mounted(){this.getProductList()}},C={class:"container"},L=t("h2",{class:"py-5 h2 text-center"},"看產品",-1),I={class:"table align-middle"},E=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),T={style:{width:"200px"}},$={key:0,class:"h5"},w={key:1},A={class:"h6"},S={class:"h5"},V={class:"btn-group btn-group-sm"},B=["onClick"],D=["onClick"],z={"aria-label":"Page navigation",class:"d-flex justify-content-end"},R={class:"pagination"},U=t("a",{class:"page-link",href:"#","aria-label":"Previous"},[t("span",{"aria-hidden":"true"},"«")],-1),F=[U],H=["onClick"],M=t("span",{"aria-hidden":"true"},"»",-1),N=[M];function O(o,a,d,c,s,l){return n(),i("div",C,[L,t("table",I,[E,t("tbody",null,[(n(!0),i(u,null,p(s.productsList,e=>(n(),i("tr",{key:e.id},[t("td",T,[t("div",{style:b([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",null,r(e.title),1),t("td",null,[e.price?(n(),i("div",w,[t("del",A,"原價 "+r(e.origin_price)+" 元",1),t("div",S,"現在只要 "+r(e.price)+" 元",1)])):(n(),i("div",$,r(e.origin_price)+" 元",1))]),t("td",null,[t("div",V,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:h=>l.showProductInfo(e.id)}," 查看更多 ",8,B),t("button",{type:"button",class:"btn btn-outline-danger",onClick:h=>o.addToCart(e.id,1)}," 加到購物車 ",8,D)])])]))),128))])]),t("nav",z,[t("ul",R,[t("li",{class:_(["page-item",{disabled:!s.pagination.has_pre}])},F,2),(n(!0),i(u,null,p(s.pagination.total_pages,e=>(n(),i("li",{class:_(["page-item",{active:e===s.pagination.current_page}]),key:e},[t("a",{href:"#",class:"page-link",onClick:g(h=>l.getProductList(e),["prevent"])},r(e),9,H)],2))),128)),t("li",{class:_(["page-item",{disabled:!s.pagination.has_next}])},[t("a",{class:"page-link",href:"#","aria-label":"Next",onClick:a[0]||(a[0]=g(e=>l.getProductList(s.pagination.current_page+1),["prevent"]))},N)],2)])])])}const G=m(x,[["render",O]]);export{G as default};
